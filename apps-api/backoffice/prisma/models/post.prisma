enum PostAttachmentType {
    IMAGE
    VIDEO
    AUDIO
}

model Post {
    feedItemId     String @id
    facebookPostId String @unique

    content     String?
    attachments PostAttachment[]
    hashTags    PostHashTag[]

    feedItem FeedItem @relation(fields: [feedItemId], references: [id])
}

model PostAttachment {
    id     String @id @default(cuid())
    postId String

    url      String
    type     PostAttachmentType
    cacheKey String             @unique
    order    Int

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    post Post @relation(fields: [postId], references: [feedItemId])
}

model PostHashTag {
    postId    String
    hashTagId String

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    hashTag HashTag @relation(fields: [hashTagId], references: [id])
    post    Post    @relation(fields: [postId], references: [feedItemId])

    @@id([postId, hashTagId])
}
