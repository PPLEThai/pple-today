
/* !!! This is code generated by Prisma. Do not edit directly. !!!
/* eslint-disable */
"use strict"
const { makeTypedQueryFactory: $mkFactory } = require("../runtime/client")
exports.get_candidate_topic = /*#__PURE__*/ $mkFactory("WITH\ncandidate_topic AS (\nSELECT * FROM get_candidate_topic_by_follower($1)\nUNION ALL\nSELECT * FROM get_candidate_topic_by_interaction($1)\nUNION ALL\nSELECT * FROM get_candidate_topic_by_similar_hashtag($1)\n),\n\nother_candidate_topic AS (\nSELECT\nt.id AS topic_id,\nRANDOM() / 10 AS score\nFROM\n\"Topic\" t\nLEFT JOIN candidate_topic ct ON t.id = ct.topic_id\nWHERE\nct.topic_id IS NULL\nORDER BY score DESC\nLIMIT 10\n),\n\nfinal_candidate_score AS (\nSELECT\nother_candidate_topic.topic_id,\nother_candidate_topic.score\nFROM\nother_candidate_topic\nUNION ALL\nSELECT\ncandidate_topic.topic_id,\n(candidate_topic.score::DOUBLE PRECISION + RANDOM() / 10) AS score\nFROM\ncandidate_topic\nORDER BY score DESC\nLIMIT 10\n)\n\nSELECT\nt.\"id\",\nt.\"name\",\nt.\"description\",\nt.\"bannerImagePath\",\nht.\"id\" AS \"hashTagId\",\nht.\"name\" AS \"hashTagName\"\nFROM\nfinal_candidate_score\nINNER JOIN \"Topic\" t ON final_candidate_score.topic_id = t.id\nLEFT JOIN \"HashTagInTopic\" htt ON t.id = htt.\"topicId\"\nLEFT JOIN \"HashTag\" ht ON htt.\"hashTagId\" = ht.id\nWHERE ht.\"status\" = 'PUBLISH' OR ht.\"status\" IS NULL;")
