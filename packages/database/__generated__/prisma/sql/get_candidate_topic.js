
/* !!! This is code generated by Prisma. Do not edit directly. !!!
/* eslint-disable */
"use strict"
const { makeTypedQueryFactory: $mkFactory } = require("../runtime/client")
exports.get_candidate_topic = /*#__PURE__*/ $mkFactory("WITH\ncandidate_topic AS (\nSELECT *\nFROM\nget_candidate_topic_by_follower ($1)\nUNION ALL\nSELECT *\nFROM\nget_candidate_topic_by_interaction ($1)\nUNION ALL\nSELECT *\nFROM\nget_candidate_topic_by_similar_hashtag ($1)\n),\nother_candidate_topic AS (\nSELECT t.id AS topic_id, 0 AS score\nFROM \"Topic\" t\nLEFT JOIN candidate_topic ct ON t.id = ct.topic_id\nWHERE\nct.topic_id IS NULL\nORDER BY score DESC\nLIMIT 10\n),\nfinal_candidate_score AS (\nSELECT other_candidate_topic.topic_id, other_candidate_topic.score\nFROM other_candidate_topic\nUNION ALL\nSELECT candidate_topic.topic_id, candidate_topic.score\nFROM candidate_topic\n),\nfinal_candidate_score_with_random AS (\nSELECT final_candidate_score.topic_id, (\nSUM(final_candidate_score.score) + RANDOM ()\n) AS score\nFROM final_candidate_score\nGROUP BY\nfinal_candidate_score.topic_id\nORDER BY score DESC\nLIMIT 10\n)\n\nSELECT\nfinal_candidate_score_with_random.\"topic_id\"\nFROM\nfinal_candidate_score_with_random;")
