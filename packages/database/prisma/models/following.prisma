enum FollowActionType {
    FOLLOW
    UNFOLLOW
}

model UserFollowsUser {
    followerId  String
    followingId String
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt

    following User @relation(name: "Following", fields: [followingId], references: [id])
    follower  User @relation(name: "Follower", fields: [followerId], references: [id])

    @@id([followingId, followerId])
    @@index([followerId])
    @@index([followingId])
}

model UserFollowsUserLog {
    id          String           @id @default(cuid())
    followerId  String
    followingId String
    action      FollowActionType

    createdAt DateTime @default(now())

    following User @relation(name: "FollowingLog", fields: [followingId], references: [id])
    follower  User @relation(name: "FollowerLog", fields: [followerId], references: [id])

    @@index([followerId])
    @@index([followingId])
}

model UserFollowsTopic {
    userId    String
    topicId   String
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    user  User  @relation(fields: [userId], references: [id])
    topic Topic @relation(fields: [topicId], references: [id])

    @@id([userId, topicId])
    @@index([userId])
    @@index([topicId])
}
